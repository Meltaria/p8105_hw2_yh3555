p8105_hw2_yh3555
================
Yuchen Hua
2022-10-01

``` r
library(tidyverse)
library(haven)
library(dplyr)
library(readxl)
library(tidyr)
```

## Problem 1

Read the dataset and retain the variables.

``` r
nyc_trans =
  read_csv(
    "./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv", 
    col_types = cols(Route8 = "c", Route9 = "c", Route10 = "c", Route11 = "c")) %>%
    janitor::clean_names() %>%
    select(
      line, station_name, station_latitude, station_longitude, starts_with("routes"), 
      entry, exit_only, vending, entrance_type, ada) %>%
    mutate(entry = ifelse(entry == "YES", TRUE, FALSE))
```

To find distinct stations.

``` r
nyc_trans %>%
  select(station_name, line) %>%
  distinct
## # A tibble: 465 × 2
##    station_name             line    
##    <chr>                    <chr>   
##  1 25th St                  4 Avenue
##  2 36th St                  4 Avenue
##  3 45th St                  4 Avenue
##  4 53rd St                  4 Avenue
##  5 59th St                  4 Avenue
##  6 77th St                  4 Avenue
##  7 86th St                  4 Avenue
##  8 95th St                  4 Avenue
##  9 9th St                   4 Avenue
## 10 Atlantic Av-Barclays Ctr 4 Avenue
## # … with 455 more rows
```

To find ADA-compliant stations.

``` r
nyc_trans %>%
  filter(ada == TRUE ) %>%
  select(station_name, line) %>%
  distinct
## # A tibble: 84 × 2
##    station_name                   line           
##    <chr>                          <chr>          
##  1 Atlantic Av-Barclays Ctr       4 Avenue       
##  2 DeKalb Av                      4 Avenue       
##  3 Pacific St                     4 Avenue       
##  4 Grand Central                  42nd St Shuttle
##  5 34th St                        6 Avenue       
##  6 47-50th Sts Rockefeller Center 6 Avenue       
##  7 Church Av                      6 Avenue       
##  8 21st St                        63rd Street    
##  9 Lexington Av                   63rd Street    
## 10 Roosevelt Island               63rd Street    
## # … with 74 more rows
```

To compuate entrance/ exist without vending allowing entrance.

``` r
nyc_trans %>%
  filter(vending == "NO") %>%
  pull(entry) %>%
  mean
## [1] 0.3770492
```

## Problem 2

To take a look at the the sheets in the excel file.

``` r
excel_sheets("./data/Trash Wheel Collection Data.xlsx")
## [1] "Mr. Trash Wheel"       "Professor Trash Wheel" "Captain Trash Wheel"  
## [4] "Gwynnda Trash Wheel"   "Homes powered note"
```

Manipulate Mr. Trash wheel sheet.

``` r
mr.trash = read_excel("./data/Trash Wheel Collection Data.xlsx", 
                        sheet = "Mr. Trash Wheel", 
                        range = "A2:N549") %>%
  janitor::clean_names() %>%
  drop_na(dumpster) %>%
  mutate(sports_balls = as.integer(round(sports_balls)))

mr.trash
## # A tibble: 547 × 14
##    dumpster month year  date                weight_tons volume…¹ plast…² polys…³
##       <dbl> <chr> <chr> <dttm>                    <dbl>    <dbl>   <dbl>   <dbl>
##  1        1 May   2014  2014-05-16 00:00:00        4.31       18    1450    1820
##  2        2 May   2014  2014-05-16 00:00:00        2.74       13    1120    1030
##  3        3 May   2014  2014-05-16 00:00:00        3.45       15    2450    3100
##  4        4 May   2014  2014-05-17 00:00:00        3.1        15    2380    2730
##  5        5 May   2014  2014-05-17 00:00:00        4.06       18     980     870
##  6        6 May   2014  2014-05-20 00:00:00        2.71       13    1430    2140
##  7        7 May   2014  2014-05-21 00:00:00        1.91        8     910    1090
##  8        8 May   2014  2014-05-28 00:00:00        3.7        16    3580    4310
##  9        9 June  2014  2014-06-05 00:00:00        2.52       14    2400    2790
## 10       10 June  2014  2014-06-11 00:00:00        3.76       18    1340    1730
## # … with 537 more rows, 6 more variables: cigarette_butts <dbl>,
## #   glass_bottles <dbl>, grocery_bags <dbl>, chip_bags <dbl>,
## #   sports_balls <int>, homes_powered <dbl>, and abbreviated variable names
## #   ¹​volume_cubic_yards, ²​plastic_bottles, ³​polystyrene
```

Manipulate Professor Trash Wheel sheet.

``` r
pro.trash = read_excel("./data/Trash Wheel Collection Data.xlsx", 
                       sheet = "Professor Trash Wheel",
                       range = "A2:M96") %>%
  janitor::clean_names() %>%
  drop_na(dumpster)

pro.trash
## # A tibble: 94 × 13
##    dumpster month     year date                weight_…¹ volum…² plast…³ polys…⁴
##       <dbl> <chr>    <dbl> <dttm>                  <dbl>   <dbl>   <dbl>   <dbl>
##  1        1 January   2017 2017-01-02 00:00:00      1.79      15    1950    6080
##  2        2 January   2017 2017-01-30 00:00:00      1.58      15    9540   11230
##  3        3 February  2017 2017-02-26 00:00:00      2.32      18    8350    9210
##  4        4 February  2017 2017-02-26 00:00:00      3.72      15    8590    1030
##  5        5 February  2017 2017-02-28 00:00:00      1.45      15    7830    9950
##  6        6 March     2017 2017-03-30 00:00:00      1.71      15    8210   10340
##  7        7 April     2017 2017-04-01 00:00:00      1.82      15    9830   11020
##  8        8 April     2017 2017-04-20 00:00:00      2.37      15    9240    8760
##  9        9 May       2017 2017-05-10 00:00:00      2.64      15    9540    8810
## 10       10 May       2017 2017-05-26 00:00:00      2.78      15    8230    7800
## # … with 84 more rows, 5 more variables: cigarette_butts <dbl>,
## #   glass_bottles <dbl>, grocery_bags <dbl>, chip_bags <dbl>,
## #   homes_powered <dbl>, and abbreviated variable names ¹​weight_tons,
## #   ²​volume_cubic_yards, ³​plastic_bottles, ⁴​polystyrene
```

To add variables to both dataset for combination.

``` r
mr.trash = mutate(mr.trash, label = "m.t") %>%
  mutate( year = as.double(year))

pro.trash = mutate (pro.trash, label = "p.t")

total_trash = full_join(mr.trash, pro.trash)

total_trash
## # A tibble: 641 × 15
##    dumpster month  year date                weight_tons volume…¹ plast…² polys…³
##       <dbl> <chr> <dbl> <dttm>                    <dbl>    <dbl>   <dbl>   <dbl>
##  1        1 May    2014 2014-05-16 00:00:00        4.31       18    1450    1820
##  2        2 May    2014 2014-05-16 00:00:00        2.74       13    1120    1030
##  3        3 May    2014 2014-05-16 00:00:00        3.45       15    2450    3100
##  4        4 May    2014 2014-05-17 00:00:00        3.1        15    2380    2730
##  5        5 May    2014 2014-05-17 00:00:00        4.06       18     980     870
##  6        6 May    2014 2014-05-20 00:00:00        2.71       13    1430    2140
##  7        7 May    2014 2014-05-21 00:00:00        1.91        8     910    1090
##  8        8 May    2014 2014-05-28 00:00:00        3.7        16    3580    4310
##  9        9 June   2014 2014-06-05 00:00:00        2.52       14    2400    2790
## 10       10 June   2014 2014-06-11 00:00:00        3.76       18    1340    1730
## # … with 631 more rows, 7 more variables: cigarette_butts <dbl>,
## #   glass_bottles <dbl>, grocery_bags <dbl>, chip_bags <dbl>,
## #   sports_balls <int>, homes_powered <dbl>, label <chr>, and abbreviated
## #   variable names ¹​volume_cubic_yards, ²​plastic_bottles, ³​polystyrene
```

## Problem 3

Import the data

``` r
pols_month = 
  read_csv("./data/pols-month.csv") %>%
  janitor::clean_names() %>%
  separate(col= mon, into =  c('year', 'month', 'day'))%>%
  mutate( 
    year = as.integer(year),
    month = as.integer(month),
    month = month.abb[month],
    day = as.integer(day)) %>%
  mutate(president = ifelse(prez_dem == 1, 'dem', 'gop') )%>%
  select(-prez_dem, -prez_gop, -day)

pols_month
## # A tibble: 822 × 9
##     year month gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem president
##    <int> <chr>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <chr>    
##  1  1947 Jan        23      51     253      23      45     198 dem      
##  2  1947 Feb        23      51     253      23      45     198 dem      
##  3  1947 Mar        23      51     253      23      45     198 dem      
##  4  1947 Apr        23      51     253      23      45     198 dem      
##  5  1947 May        23      51     253      23      45     198 dem      
##  6  1947 Jun        23      51     253      23      45     198 dem      
##  7  1947 Jul        23      51     253      23      45     198 dem      
##  8  1947 Aug        23      51     253      23      45     198 dem      
##  9  1947 Sep        23      51     253      23      45     198 dem      
## 10  1947 Oct        23      51     253      23      45     198 dem      
## # … with 812 more rows
```

Clean up the the data in snp.csv

``` r
snp = 
  read_csv("./data/snp.csv")
```

Clean up the Unemployment data

``` r
Unemp = 
  read_csv("./data/unemployment.csv")
```
